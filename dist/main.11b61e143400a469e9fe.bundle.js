!function(){"use strict";var e,t={2623:function(e,t,n){var r=n(7378),a=n(1542),o=n(65),i=n(6536),c=n(3282),l=n(5935),s=n.n(l),u=n(6552),d=n(5718),m=n(8055),f=n(5106),v=n(2052),p=n(3494),h=n(4965),y=n(58),g=n(3450),b=n(8907);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={s001:{id:"s001"},s002:{id:"s002"},s003:{id:"s003"},s004:{id:"s004"}},x=(0,b.ZP)((function(e,t){var n=t.type,r=t.payload;switch(n){case"store/RESET":return k;case"song/SAVE_MASTER":e[r.songId]=w(w({},e[r.songId]),{},{master:r.data});break;case"song/SAVE_TRACK":var a={};r.data.effects.forEach((function(e){a[e.name]=e.get()})),e[r.songId]=w(w({},e[r.songId]),{},{tracks:w(w({},e[r.songId].tracks),{},(0,g.Z)({},r.trackId,w(w({},r.data),{},{effects:a})))})}}),k),O=function(e){return(0,f.UY)({router:(0,c.iz)(e),songs:x})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={0:function(e){return S(S({},e.app),{},{master:S({},e.app.master),tracks:S(S({},e.app.tracks),{},{t005:S(S({},e.app.tracks.t005),{},{instrument:S(S({},e.app.tracks.t005.instrument),{},{effects:S(S({},e.app.tracks.t005.instrument.effects),{},{Reverb:{decay:4,preDelay:.2,wet:.28}})})})})})}},N={key:"root",storage:p.Z,blacklist:["router"],version:0,stateReconciler:h.Z,migrate:(0,v.yv)(C,{debug:!1})},q=n(6218),D=n(7135),F=n.n(D),R=n(1476),j=n(4206),A=n.n(j);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=n.p+"assets/6afcb252d35b92fae5f607e460966551.svg",M=n(42),L=n.n(M),T=function(e){var t=e.children,n=e.id,a=e.className;return r.createElement("main",{id:n,className:L()("me__main",a)},t)},W=n(9603),_=n(3697),B=n(2569),z=function(e,t){return[-(t-window.innerHeight/2)/20,(e-window.innerWidth/2)/20,1.1]},Q=function(e,t,n){return"perspective(600px) rotateX(".concat(e,"deg) rotateY(").concat(t,"deg) scale(").concat(n,")")},K=function(e){var t=e.animate,n=void 0!==t&&t,a=e.fill,o=void 0===a?"var(--color-primary)":a,i=e.onClick,c=(0,B.q_)((function(){return{xys:[0,0,1],config:{mass:5,tension:350,friction:40}}})),l=(0,_.Z)(c,2),s=l[0],u=l[1];return r.createElement(B.q.svg,(0,W.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 480 480",onMouseMove:function(e){var t=e.clientX,n=e.clientY;return u({xys:z(t,n)})},onMouseLeave:function(){return u({xys:[0,0,1]})}},n&&{style:{transform:s.xys.interpolate(Q)}},{onClick:function(){"function"==typeof i&&i()}}),r.createElement("path",{fill:o,d:"M240 0c-132.5 0-240 107.5-240 240s107.5 240 240 240 240-107.5 240-240-107.5-240-240-240zm111.9 177.8c-17.4 11.3-35.5 21.8-43.1 43-4.6 12.6-9.5 24.9 2.6 36.3 2.8 2.7 5.7 6.4 6.4 10 .9 4.5 1.4 12-1 13.7-7.8 5.4-5.9 11.1-4.1 18.3 6.9 27.5 13.4 55.2 19.5 82.9.7 3.3-1.7 7.4-2.6 11.1-2.9-2.7-7.3-4.9-8.4-8.3-9.7-27.2-19.3-54.4-27.8-82-2.9-9.5-6.6-12.1-16.3-9.8l-36.6 5.8c-8.9 2.1-17.1 6.8-25.8 9.7-2.9 1-6.5-.1-9.8-.2.8-2.9.7-6.8 2.6-8.7 26.9-27.2 33.3-37.2 48.8-77.3-7.7-9-15.8-9.9-25.2-3.9-19.8 12.6-39.6 25.1-59.7 37.1-13.2 7.9-26.7 15.1-40.4 22.1-3 1.5-7.3.3-11 .3 1.2-3.7 1.3-8.6 3.8-10.9 27-24.6 58-42.6 92.1-55.5 2.4-.9 4.9-2 7.2-3.3 1.4-.8 2.6-2 5-4-12.2-5.7-21-14.8-34.9-14.7-5.1.1-10.5-5.4-15.4-8.8-1.1-.7-1.5-4.6-.7-5.2 1.7-1.5 4.9-3.1 6.6-2.5 10.3 3.7 20.5 7.9 30.6 12.2 4.6 2 9.4 4 13.2 7.1 7.6 6.2 12.8 2.5 18.9-2.6 14.9-12.5 23.9-25.4 17.9-47.2-4.8-17.6-3.6-36.9-5-55.4 1.1-.2 2.2-.4 3.3-.5 4.3 23.2 8.7 46.4 13 69.9 5.2-8.3 10.3-16.4 15.4-24.5.9-1.4 1.3-3.4 2.6-4.3 2.7-2 5.8-3.4 8.7-5.1.8 3.2 3.1 7 2.2 9.6-3.7 11.1-8.3 21.9-12.8 32.7-2.8 6.7-6 13.3-9 19.9l1.6 2.4c8.3-2.7 16.6-5.2 24.8-8.2 12.2-4.5 24.1-9.8 36.5-13.7 4-1.3 11.6-.9 13.2 1.5 3.9 6.2-2.7 8.3-6.9 11zM235 289.9c11.2-20.8 21.6-40.2 32.4-60.2 18.4 13.6 11.4 34.8 19.7 52.3-18 2.7-34.3 5.2-52.1 7.9zM292.2 238c-7.5-9.7-8.9-22.1-9-34.7 0-1.4 2.7-3.6 4.5-4.2 10.2-3.6 20.6-6.8 28.8-9.4-7.6 15.1-15.8 31.4-24.3 48.3z"}))},G=function(){var e=(0,q.TH)(),t=(0,q.k6)();return r.createElement("footer",{className:"me__footer"},r.createElement(K,{fill:"var(--color-grey-800)",onClick:function(){return t.push("/"===e.pathname?"/studio":"/")}}))},H=function(){return r.createElement(r.Fragment,null,r.createElement(T,{className:"index"},r.createElement("div",null,r.createElement(K,{animate:!0,fill:"var(--color-primary)"})),r.createElement("div",{className:"social-links"},r.createElement("a",{href:"http://twitter.com/theseboys",target:"_blank"},r.createElement("img",{alt:"Twitter logo",style:{width:"24px",height:"24px"},src:Z})),r.createElement("iframe",{scrolling:"no",frameBorder:"no",src:"https://w.soundcloud.com/icon/?url=http%3A%2F%2Fsoundcloud.com%2Ftheseboys&color=orange_white&size=24",style:{width:"24px",height:"24px"}}))),r.createElement(G,null))},U=n(8901),J={pan:0,volume:4,mute:!1},X=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Y={i001:{id:"i001",name:"SUB KICK",notes:["G1"],instrument:"MembraneSynth",synth:{pitchDecay:.01,octaves:6,oscillator:{type:"square4"},envelope:{attack:.001,decay:.45,sustain:.1,release:.3}},effects:{Reverb:{decay:.2,preDelay:.2,wet:.05},Distortion:{distortion:.6,oversample:"4x",wet:.22},Compressor:{threshold:-26,knee:20,ratio:4.2,attack:.024,release:.132},Limiter:{threshold:-48},EQ3:{Q:1,low:-3,mid:-48,high:-60,lowFrequency:100,highFrequency:120}},controls:{equaliser:{span:"1 / span 5",effects:["EQ3"]},compressor:{span:"6 / span 4",effects:["Compressor"]},limiter:{span:"10 / span 1",effects:["Limiter"]},effects:{span:"11 / span 2",effects:["Distortion","Reverb"]}}},i002:{id:"i002",name:"MID KICK",notes:["C1"],instrument:"MembraneSynth",synth:{pitchDecay:.01,octaves:6,oscillator:{type:"square4"},envelope:{attack:.001,decay:.45,sustain:.1,release:.3}},effects:{Compressor:{threshold:-21,knee:20,ratio:4.2,attack:.024,release:.132},Limiter:{threshold:-12},EQ3:{Q:1,low:-3,mid:-24,high:-60,lowFrequency:160,highFrequency:420}},controls:{eq3:{span:"1 / span 5",effects:["EQ3"]},compressor:{span:"6 / span 4",effects:["Compressor"]},limiter:{span:"10 / span 1",effects:["Limiter"]}}},i003:{id:"i003",name:"",notes:["C1"],instrument:"MetalSynth",synth:{harmonicity:12,resonance:1e3,modulationIndex:20,volume:-15,envelope:{attack:1.2,decay:1,sustain:0,release:.067}},effects:{Reverb:{decay:4,preDelay:.2,wet:.22},FeedbackDelay:{delayTime:.25,feedback:1/3,wet:.15,maxDelay:1},Distortion:{distortion:1,oversample:"4x",wet:.12},Gain:{gain:2},EQ3:{low:-48,mid:-6,high:-6,lowFrequency:800,highFrequency:1600}},controls:{equaliser:{span:"1 / span 5",effects:["EQ3"]},effects:{span:"6 / span 3",effects:["Distortion","Reverb","FeedbackDelay"]}}},i004:{id:"i004",name:"",notes:["C1"],instrument:"MetalSynth",synth:{harmonicity:12,resonance:1e3,modulationIndex:20,volume:-15,envelope:{attack:1.2,decay:1,sustain:0,release:.067}},effects:{Reverb:{decay:4,preDelay:.2,wet:.8},FeedbackDelay:{delayTime:.25,feedback:1/3,wet:.5,maxDelay:1},BitCrusher:{wet:.6,bits:10},Distortion:{distortion:1,oversample:"4x",wet:.68},Gain:{gain:2},PitchShift:{wet:.8,pitch:0},StereoWidener:{wet:.8,width:1},EQ3:{low:-48,mid:0,high:-12,lowFrequency:1200,highFrequency:2400}},controls:{equaliser:{span:"1 / span 5",effects:["EQ3"]},effects:{span:"6 / span 6",effects:["Distortion","Reverb","FeedbackDelay","PitchShift","StereoWidener","BitCrusher"]}}},i005:{id:"i005",name:"",instrument:"NoiseSynth",synth:{volume:-8,noise:{type:"white",playbackRate:5},envelope:{attack:.001,decay:.222,sustain:.26,release:.188}},effects:{Filter:{Q:1,detune:0,frequency:11600,gain:0,rolloff:-48,type:"bandpass"},EQ3:{low:-60,mid:0,high:-6,lowFrequency:6e3,highFrequency:12e3}},controls:{equaliser:{span:"1 / span 5",effects:["EQ3"]},filter:{span:"6 / span 1",effects:["Filter"]}}},i006:{id:"i006",name:"",instrument:"NoiseSynth",synth:{volume:-8,noise:{type:"white",playbackRate:5},envelope:{attack:.001,decay:.3,sustain:.002,release:.32}},effects:{Filter:{Q:1,detune:0,frequency:3700,gain:0,rolloff:-48,type:"bandpass"},Reverb:{decay:4,preDelay:.2,wet:.28},EQ3:{low:-60,mid:0,high:-6,lowFrequency:9e3,highFrequency:16e3}},controls:{equaliser:{span:"1 / span 5",effects:["EQ3"]},filter:{span:"6 / span 1",effects:["Filter"]}}}},$=n(6250),ee=n(3721),te=n(3615),ne=n.n(te);var re=function(e){var t=e.from;t=void 0===t?[0,100]:t;var n=(0,_.Z)(t,2),r=n[0],a=n[1],o=e.to;o=void 0===o?[0,100]:o;var i=(0,_.Z)(o,2),c=i[0],l=i[1],s=e.clamp,u=void 0===s||s,d=(l-c)/(a-r);return function(e){return function(e,t,n,r){return r?function(e,t,n){var r=n;return r<e&&(r=e),r>t&&(r=t),r}(e,t,n):n}(c,l,d*e+(-d*r+c),u)}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,100],t=arguments.length>1?arguments[1]:void 0,n=re({to:e});return n(t)},oe=function(e){for(var t=document.querySelectorAll("#".concat(e,"-steps .steps")),n=[],r=0;r<t.length;r++){for(var a=[],o=t[r].querySelectorAll(".step"),i=0;i<o.length;i++)"on"===o[i].getAttribute("data-value")?a.push(1):a.push(0);n.push(a)}return n},ie=function(e,t,n){if("string"!=typeof e)return!1;var r=document.querySelector("#".concat(e," .step.row-").concat(t,"-step-").concat(n));return!!r&&"on"===r.getAttribute("data-value")},ce=function(e,t,n){var r=document.getElementsByClassName("step ".concat(e,"-step"));if(r)for(var a=0;a<r.length;a++)(a-n)%t==0?r[a].setAttribute("data-status","current"):r[a].setAttribute("data-status","idle")},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;Array.isArray(t)||(t=[]);for(var i=Math.max(1,t.length),c=[],l=0===a?1:.75,s=0;s<i;s++)if(ie(e,s,a))if(Array.isArray(t)&&t.length){var u=t[s];c.push(u)}else o(null,l);c.length&&o(c,l),U.hG.schedule((function(){ce(e,n,a)}),r)},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,100],t=arguments.length>1?arguments[1]:void 0,n=re({from:e});return Math.round(n(t))},ue=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},de=-60,me=2e4,fe=-60,ve=.01,pe=(0,r.memo)((function(e){var t=e.className,n=e.width,a=void 0===n?"100%":n,o=e.stroke,i=void 0===o?"var(--color-bluegrey-600)":o,c=e.strokeWidth,l=void 0===c?"4":c;return r.createElement("svg",{className:L()("svg-icon",t),width:a,viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},r.createElement("polyline",{points:"0,10 15,20 30,10",fill:"transparent",stroke:i,strokeWidth:l}))})),he=(0,r.memo)((function(e){var t=e.className,n=e.width,a=void 0===n?"100%":n,o=e.fill,i=void 0===o?"var(--color-bluegrey-600)":o,c=e.stroke,l=void 0===c?"var(--color-bluegrey-600)":c,s=e.strokeWidth,u=void 0===s?"0":s;return r.createElement("svg",{className:L()("svg-icon",t),width:a,viewBox:"0 0 300 300",xmlns:"http://www.w3.org/2000/svg"},r.createElement("circle",{cx:"150",cy:"150",r:"150",fill:i,stroke:l,strokeWidth:u}))})),ye=(0,r.memo)((function(e){var t=e.className,n=e.width,a=void 0===n?"100%":n,o=e.stroke,i=void 0===o?"var(--color-bluegrey-600)":o,c=e.strokeWidth,l=void 0===c?"4":c;return r.createElement("svg",{className:L()("svg-icon",t),width:a,viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},r.createElement("line",{x1:"0",y1:"15",x2:"30",y2:"15",fill:"transparent",stroke:i,strokeWidth:l}))})),ge=(0,r.memo)((function(e){var t=e.className,n=e.width,a=void 0===n?"100%":n,o=e.fill,i=void 0===o?"var(--color-bluegrey-600)":o,c=e.stroke,l=void 0===c?"var(--color-bluegrey-600)":c,s=e.strokeWidth,u=void 0===s?"0":s;return r.createElement("svg",{className:L()("svg-icon",t),width:a,viewBox:"0 0 300 300",xmlns:"http://www.w3.org/2000/svg"},r.createElement("polygon",{points:"75, 25 300, 150 75, 275",fill:i,stroke:l,strokeWidth:u}))})),be=(0,r.memo)((function(e){var t=e.className,n=e.width,a=void 0===n?"100%":n,o=e.stroke,i=void 0===o?"var(--color-bluegrey-600)":o,c=e.strokeWidth,l=void 0===c?"4":c;return r.createElement("svg",{className:L()("svg-icon",t),width:a,viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},r.createElement("line",{x1:"15",y1:"0",x2:"15",y2:"30",fill:"transparent",stroke:i,strokeWidth:l}),r.createElement("line",{x1:"0",y1:"15",x2:"30",y2:"15",fill:"transparent",stroke:i,strokeWidth:l}))})),Ee=(0,r.memo)((function(e){var t=e.className,n=e.width,a=void 0===n?"100%":n,o=e.fill,i=void 0===o?"var(--color-bluegrey-600)":o,c=e.stroke,l=void 0===c?"var(--color-bluegrey-600)":c,s=e.strokeWidth,u=void 0===s?"0":s;return r.createElement("svg",{className:L()("svg-icon",t),width:a,viewBox:"0 0 300 300",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"300",height:"300",fill:i,stroke:l,strokeWidth:u}))})),we=(0,r.memo)((function(e){var t,n=e.children,a=e.id,o=e.testId,i=e.isDisabled,c=void 0!==i&&i,l=e.className,s=e.role,u=void 0===s?"button":s,d=e.type,m=void 0===d?"button":d,f=e.size,v=void 0===f?48:f,p=e.shape,h=void 0===p?"circle":p,y=e.variant,b=(0,ee.Z)(e,["children","id","testId","isDisabled","className","role","type","size","shape","variant"]);return r.createElement("button",(0,W.Z)({id:a,"data-testid":o,disabled:c,className:L()("tb-button",(t={},(0,g.Z)(t,"size-".concat(v),v&&"text"!==y),(0,g.Z)(t,h,h&&"text"!==y),(0,g.Z)(t,y,y),(0,g.Z)(t,"disabled",c),t),l),role:u,type:m},b),n)})),ke=we;we.propTypes={size:(0,te.oneOf)([24,28,32,36,40,44,48]),shape:(0,te.oneOf)(["circle","rounded"])};var xe=(0,r.memo)((function(e){var t=e.children,n=e.id,a=e.orient,o=void 0===a?"vertical":a;return r.createElement("div",{id:n,className:L()("controller",(0,g.Z)({},o,o))},t)})),Oe=(0,r.memo)((function(e){var t=e.id,n=e.orient,a=void 0===n?"vertical":n,o=e.label,i=e.step,c=void 0===i?1:i,l=e.min,s=void 0===l?0:l,u=e.max,d=void 0===u?100:u,m=e.initialValue,f=e.toFixed,v=void 0===f?0:f,p=e.onChange;(0,r.useEffect)((function(){h(m)}),[m]);var h=function(e){var n,r;if(!("number"!=typeof e||e<s||e>d)){var a;if(null===(n=document.querySelectorAll("#".concat(t," .control")))||void 0===n||n.forEach((function(t){return t.setAttribute("value","".concat(e))})),null===(r=document.querySelector("#".concat(t," span.value")))||void 0===r||r.setAttribute("value",e.toFixed(v)),e>s&&e<d)null===(a=document.querySelectorAll("#".concat(t," .control")))||void 0===a||a.forEach((function(e){return e.classList.contains("alert")&&e.classList.remove("alert")}));else if(e===s){var o;null===(o=document.querySelector("#".concat(t," .control.dec")))||void 0===o||o.classList.add("alert")}else if(e===d){var i;null===(i=document.querySelector("#".concat(t," .control.inc")))||void 0===i||i.classList.add("alert")}p(e)}};return r.createElement(xe,{id:t,orient:a},r.createElement("label",{className:"label"},o),r.createElement("div",{className:"controls"},r.createElement(ke,{className:"control dec",size:28,onClick:function(e){var t=parseFloat(e.target.value)-c;t<s||h(t)}},r.createElement(ye,{width:"72%"})),r.createElement(ke,{className:"control inc",size:28,onClick:function(e){var t=parseFloat(e.target.value)+c;t>d||h(t)}},r.createElement(be,{width:"72%"}))),r.createElement("span",{className:"value"}))})),Ie=(0,r.memo)((function(e){var t=e.children,n=e.orientation,a=void 0===n?"horizontal":n;return r.createElement("div",{className:L()("controller-group",(0,g.Z)({},a,a))},t)})),Se=(0,r.memo)((0,r.forwardRef)((function(e,t){var n,a=e.id,o=e.testId,i=e.className,c=e.orient,l=void 0===c?"horizontal":c,s=e.isDisabled,u=void 0!==s&&s,d=e.step,m=void 0===d?.1:d,f=e.min,v=void 0===f?0:f,p=e.max,h=void 0===p?1:p,y=e.onChange,b=(0,ee.Z)(e,["id","testId","className","orient","isDisabled","step","min","max","onChange"]);return r.createElement("input",(0,W.Z)({ref:t,id:a,"data-testid":o,className:L()("tb-slider",(n={},(0,g.Z)(n,"orient-".concat(l),l),(0,g.Z)(n,"disabled",u),n),i),disabled:u,orient:l,type:"range",step:m,max:h,min:v,onChange:y},b))}))),Ce=Se;Se.propTypes={orient:te.string,isDisabled:te.bool,step:te.number,max:te.number,min:te.number,onChange:te.func.isRequired};var Ne=(0,r.memo)((function(e){var t=e.id,n=e.orient,a=void 0===n?"vertical":n,o=e.label,i=e.step,c=void 0===i?.1:i,l=e.min,s=void 0===l?0:l,u=e.max,d=void 0===u?1:u,m=e.initialValue,f=e.toFixed,v=void 0===f?0:f,p=e.onChange,h=(0,r.useRef)(null),y=(0,r.useRef)(null);(0,r.useEffect)((function(){g(m)}),[m]);var g=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null==h||!h.current||null==y||!y.current||"number"!=typeof e||e<s||e>d||(t&&(h.current.value="".concat(e)),y.current.setAttribute("value",e.toFixed(v)),p(e))};return r.createElement(xe,{id:t,orient:a},r.createElement("label",{className:"label"},o),r.createElement("div",{className:"controls"},r.createElement(Ce,{ref:h,className:"control",orient:a,step:c,min:s,max:d,onChange:function(e){return g(parseFloat(e.target.value),!1)},onKeyDown:function(e){switch(e.key){case"q":g(s);break;case"w":g(d);break;case"e":g(m)}}})),r.createElement("span",{ref:y,className:"value"}))})),qe=(0,r.memo)((function(e){var t,n,a=e.trackId,o=e.trackNumber,i=e.channel,c=e.onSample;return a&&i?r.createElement("div",{id:"".concat(a,"-controls"),className:"track-controls"},r.createElement(Ie,null,o?r.createElement(ke,{id:"".concat(a,"-sample"),size:32,onClick:c},o):null,r.createElement(ke,{className:L()({alert:i.muted}),size:32,onClick:function(e){i.set({mute:!i.muted}),e.target.classList.toggle("alert")}},"M")),r.createElement(Ie,null,r.createElement(Oe,{id:"".concat(a,"-volume"),orient:"horizontal",label:"VOL",initialValue:null!==(t=se([fe,20],i.get().volume))&&void 0!==t?t:0,onChange:function(e){return i.set({volume:ae([fe,20],e)})}}),r.createElement(Oe,{id:"".concat(a,"-pan"),orient:"horizontal",label:"PAN",step:.1,min:-1,max:1,toFixed:1,initialValue:null!==(n=i.get().pan)&&void 0!==n?n:0,onChange:function(e){return i.set({pan:e})}}),r.createElement(ke,{size:36,onClick:function(e){var t;null===(t=document.querySelector("#".concat(a,"-effects")))||void 0===t||t.classList.toggle("hidden"),e.target.classList.toggle("rotated")}},r.createElement(pe,{width:"60%"})))):null})),De=(0,r.memo)((function(e){var t=e.trackId,n=e.stepValue,a=e.rowIndex,o=e.stepIndex;return t&&"number"==typeof a&&"number"==typeof o?r.createElement("span",{className:"step ".concat(t,"-step row-").concat(a,"-step-").concat(o),"data-value":n?"on":"off","data-status":"idle",onClick:function(){var e=document.querySelector(".step.".concat(t,"-step.row-").concat(a,"-step-").concat(o));e?"off"===e.getAttribute("data-value")?e.setAttribute("data-value","on"):e.setAttribute("data-value","off"):"step not found ".concat(t," ").concat(a," ").concat(o)}},r.createElement("svg",{className:"step-zone",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"}),r.createElement("svg",{className:"step-icon off",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},r.createElement("circle",{cx:"15",cy:"15",r:"5"})),r.createElement("svg",{className:"step-icon on",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},r.createElement("circle",{cx:"15",cy:"15",r:"15"}))):null})),Fe=(0,r.memo)((function(e){var t=e.trackId,n=e.numberOfSteps,a=void 0===n?16:n,o=e.initialValue;return t&&Array.isArray(o)?r.createElement("div",{className:"step-sequencer"},o.map((function(e,n){return Array.isArray(e)?r.createElement("div",{key:n,style:{gridTemplateColumns:"repeat(".concat(a,",1fr)")},className:"steps ".concat(t,"-steps-").concat(n)},e.map((function(e,a){return r.createElement(De,{key:a,trackId:t,stepValue:e,rowIndex:n,stepIndex:a})}))):null}))):null})),Re=(0,r.memo)((function(e){var t=e.trackId,n=e.numSteps,a=void 0===n?16:n,o=e.initialValue;return r.createElement("div",{id:"".concat(t,"-steps"),className:"track-steps"},r.createElement(Fe,{trackId:t,numberOfSteps:a,initialValue:o}))})),je=(0,r.memo)((function(e){var t=e.children,n=e.trackId;return r.createElement("div",{id:"".concat(n,"-effects"),className:"track-effects"},t)}));function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=(0,r.memo)((function(e){var t=e.style,n=void 0===t?{}:t,a=e.children,o=e.span,i=e.title,c=void 0===i?"":i;return r.createElement("div",{style:Pe({gridColumn:o},n),className:"effects-group"},r.createElement("div",{className:"controls"},a),c?r.createElement("div",{className:"label"},r.createElement("div",null),r.createElement("span",null,c),r.createElement("div",null)):null)})),Ze=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-bitcrusher--bits"),label:"BIT",step:1,min:1,max:16,initialValue:null!==(t=a.get().bits)&&void 0!==t?t:0,onChange:function(e){return a.set({bits:e})}}):null})),Me=(0,r.memo)((function(e){var t,n,a,o,i=e.trackId,c=e.node;return i&&c?r.createElement(r.Fragment,null,r.createElement(Ne,{id:"".concat(i,"-compressor--ratio"),label:"RTO",step:1,min:1,max:20,initialValue:null!==(t=c.get().ratio)&&void 0!==t?t:1,onChange:function(e){return c.set({ratio:e})}}),r.createElement(Ne,{id:"".concat(i,"-compressor--attack"),label:"ATK",step:.001,toFixed:3,initialValue:null!==(n=c.get().attack)&&void 0!==n?n:0,onChange:function(e){return c.set({attack:e})}}),r.createElement(Ne,{id:"".concat(i,"-compressor--release"),label:"REL",step:.001,toFixed:3,initialValue:null!==(a=c.get().release)&&void 0!==a?a:0,onChange:function(e){return c.set({release:e})}}),r.createElement(Ne,{id:"".concat(i,"-compressor--threshold"),label:"TRH",step:1,min:de,max:20,initialValue:null!==(o=c.get().threshold)&&void 0!==o?o:0,onChange:function(e){return c.set({threshold:e})}})):null})),Le=(0,r.memo)((function(e){var t,n,a,o,i=e.trackId,c=e.node;return i&&c?r.createElement(r.Fragment,null,r.createElement(Ne,{id:"".concat(i,"-envelope--attack"),label:"ATK",step:.001,max:2,toFixed:3,initialValue:null!==(t=c.get().attack)&&void 0!==t?t:0,onChange:function(e){return c.set({attack:e})}}),r.createElement(Ne,{id:"".concat(i,"-envelope--decay"),label:"DEC",step:.001,max:2,toFixed:3,initialValue:null!==(n=c.get().decay)&&void 0!==n?n:0,onChange:function(e){return c.set({decay:e})}}),r.createElement(Ne,{id:"".concat(i,"-envelope--sustain"),label:"SUS",step:.001,toFixed:3,initialValue:null!==(a=c.get().sustain)&&void 0!==a?a:0,onChange:function(e){return c.set({sustain:e})}}),r.createElement(Ne,{id:"".concat(i,"-envelope--release"),label:"REL",step:.001,max:2,toFixed:3,initialValue:null!==(o=c.get().release)&&void 0!==o?o:0,onChange:function(e){return c.set({release:e})}})):null})),Te=(0,r.memo)((function(e){var t,n,a,o,i,c=e.trackId,l=e.node;return c&&l?r.createElement(r.Fragment,null,r.createElement(Ne,{id:"".concat(c,"-eq3--low"),label:"LOW",step:1,min:de,max:20,initialValue:null!==(t=l.get().low)&&void 0!==t?t:0,onChange:function(e){return l.set({low:e})}}),r.createElement(Ne,{id:"".concat(c,"-eq3--mid"),label:"MID",step:1,min:de,max:20,initialValue:null!==(n=l.get().mid)&&void 0!==n?n:0,onChange:function(e){return l.set({mid:e})}}),r.createElement(Ne,{id:"".concat(c,"-eq3--high"),label:"HIG",step:1,min:de,max:20,initialValue:null!==(a=l.get().high)&&void 0!==a?a:0,onChange:function(e){return l.set({high:e})}}),r.createElement(Ne,{id:"".concat(c,"-eq3--low-frequency"),label:"LPF",step:10,min:20,max:me,initialValue:null!==(o=l.get().lowFrequency)&&void 0!==o?o:1e3,onChange:function(e){return l.set({lowFrequency:e})}}),r.createElement(Ne,{id:"".concat(c,"-eq3--high-frequency"),label:"HPF",step:10,min:20,max:me,initialValue:null!==(i=l.get().highFrequency)&&void 0!==i?i:1e3,onChange:function(e){return l.set({highFrequency:e})}})):null})),We=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-filter--frequency"),label:"FRQ",step:10,min:20,max:me,initialValue:null!==(t=a.get().frequency)&&void 0!==t?t:1e3,onChange:function(e){return a.set({frequency:e})}}):null})),_e=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-distortion--wet"),label:"DIS",step:ve,min:0,max:1,toFixed:2,initialValue:null!==(t=a.get().wet)&&void 0!==t?t:0,onChange:function(e){return a.set({wet:e})}}):null})),Be=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-limiter--threshold"),label:"LIM",step:1,min:de,max:20,initialValue:null!==(t=a.get().threshold)&&void 0!==t?t:0,onChange:function(e){return a.set({threshold:e})}}):null})),ze=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-reverb--wet"),label:"REV",step:ve,min:0,max:1,toFixed:2,initialValue:null!==(t=a.get().wet)&&void 0!==t?t:0,onChange:function(e){return a.set({wet:e})}}):null})),Qe=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-delay--wet"),label:"DEL",step:ve,min:0,max:1,toFixed:2,initialValue:null!==(t=a.get().wet)&&void 0!==t?t:0,onChange:function(e){return a.set({wet:e})}}):null})),Ke=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-pitchshift--pitch"),label:"PCH",step:12,min:-48,max:48,initialValue:null!==(t=a.get().pitch)&&void 0!==t?t:0,onChange:function(e){return a.set({pitch:e})}}):null})),Ge=(0,r.memo)((function(e){var t,n=e.trackId,a=e.node;return n&&a?r.createElement(Ne,{id:"".concat(n,"-stereowidener--width"),label:"STW",toFixed:1,initialValue:null!==(t=a.get().width)&&void 0!==t?t:0,onChange:function(e){return a.set({width:e})}}):null})),He=(0,r.memo)((0,r.forwardRef)((function(e,t){var n,a,i=e.songId,c=e.trackId,l=e.trackNumber,s=e.channel,u=e.instrument,d=e.notes,m=e.synth,f=e.stepCount,v=e.steps,p=e.effects,h=e.controls,y=((0,ee.Z)(e,["songId","trackId","trackNumber","channel","instrument","notes","synth","stepCount","steps","effects","controls"]),(0,o.I0)()),g="".concat(f,"n"),b=ue(f),E=(0,r.useRef)(),w=(0,r.useRef)(new U.$W(null!=s?s:{})),k=(0,r.useRef)(Object.entries(null!=p?p:{}).map((function(e){var t=(0,_.Z)(e,2);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{BitCrusher:new U.MH(t),Compressor:new U.dL(t),Distortion:new U.df(t),EQ3:new U.Fl(t),FeedbackDelay:new U.wm(t),Filter:new U.wn(t),Gain:new U.S9(t),Limiter:new U.G8(t),Phaser:new U.lf(t),PitchShift:new U.yW(t),Reverb:new U.E8(t),StereoWidener:new U.Z2(t)}[e]}(t[0],t[1])}))),x=(0,r.useRef)((n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={MembraneSynth:new U.CF(t),MetalSynth:new U._T(t),NoiseSynth:new U.fR(t)};return n[e]}(u,m)).chain.apply(n,[w.current].concat((0,$.Z)(k.current),[U.o6])));(0,r.useEffect)((function(){return E.current=new U.T9(I,b,g).start(0),function(){null!=E&&E.current&&E.current.dispose()}}),[]);var O=function(e,t,n,r){null!=x&&x.current&&("NoiseSynth"!==x.current.name?x.current.triggerAttackRelease(e[0],t,n,r):x.current.triggerAttackRelease(t,n,r))},I=function(e,t){le(c,d,f,e,t,(function(t,n){return O(t,g,e,n)}))};return(0,r.useImperativeHandle)(t,(function(){return{save:function(){y({type:"song/SAVE_TRACK",payload:{songId:i,trackId:c,data:{channel:w.current.get(),steps:oe(c),synth:x.current.get(),effects:k.current}}})}}})),r.createElement("div",{id:c,className:"track"},r.createElement(qe,{trackId:c,trackNumber:l,channel:null==w?void 0:w.current,onSample:function(){return O(d,g)}}),r.createElement(Re,{trackId:c,numSteps:f,initialValue:v}),r.createElement(je,{trackId:c},Object.entries(null!=h?h:{}).map((function(e,t){var n=(0,_.Z)(e,2),a=n[0],o=n[1];return r.createElement(Ve,{key:t,span:o.span,title:a},o.effects.map((function(e,t){var n=k.current.find((function(t){return t.name===e}));if(!n)return null;switch(e){case"BitCrusher":return r.createElement(Ze,{key:t,trackId:c,node:n});case"Compressor":return r.createElement(Me,{key:t,trackId:c,node:n});case"Distortion":return r.createElement(_e,{key:t,trackId:c,node:n});case"EQ3":return r.createElement(Te,{key:t,trackId:c,node:n});case"FeedbackDelay":return r.createElement(Qe,{key:t,trackId:c,node:n});case"Filter":return r.createElement(We,{key:t,trackId:c,node:n});case"Limiter":return r.createElement(Be,{key:t,trackId:c,node:n});case"PitchShift":return r.createElement(Ke,{key:t,trackId:c,node:n});case"Reverb":return r.createElement(ze,{key:t,trackId:c,node:n});case"StereoWidener":return r.createElement(Ge,{key:t,trackId:c,node:n});default:return null}})))})),r.createElement(Ve,{span:"17 / span 4",title:"envelope"},r.createElement(Le,{trackId:c,node:null==x||null===(a=x.current)||void 0===a?void 0:a.envelope}))))}))),Ue=He;He.propTypes={songId:ne().string.isRequired,trackId:ne().string.isRequired,trackNumber:ne().number.isRequired,instrument:ne().string.isRequired,stepCount:ne().number.isRequired};var Je=(0,r.memo)((0,r.forwardRef)((function(e,t){var n,a,i=e.songId,c=e.trackId,l=e.channel,s=e.instrument,u=e.synth,d=e.notes,m=e.stepCount,f=e.steps,v=e.effects,p=e.controls,h=((0,ee.Z)(e,["songId","trackId","channel","instrument","synth","notes","stepCount","steps","effects","controls"]),(0,o.I0)()),y="".concat(m,"n"),g=ue(m),b=(0,r.useRef)(),E=(0,r.useRef)(new U.$W(null!=l?l:{})),w=(0,r.useRef)(Object.entries(null!=v?v:{}).map((function(e){var t=(0,_.Z)(e,2);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{BitCrusher:new U.MH(t),Compressor:new U.dL(t),Distortion:new U.df(t),EQ3:new U.Fl(t),FeedbackDelay:new U.wm(t),Filter:new U.wn(t),Gain:new U.S9(t),Limiter:new U.G8(t),Phaser:new U.lf(t),PitchShift:new U.yW(t),Reverb:new U.E8(t),StereoWidener:new U.Z2(t)}[e]}(t[0],t[1])}))),k=(0,r.useRef)((n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={MembraneSynth:new U.CF(t),MetalSynth:new U._T(t),NoiseSynth:new U.fR(t)};return n[e]}(s,u)).chain.apply(n,[E.current].concat((0,$.Z)(w.current),[U.o6])));(0,r.useEffect)((function(){return b.current=new U.T9(O,g,y).start(0),function(){null!=b&&b.current&&b.current.dispose()}}),[]);var x=function(e,t,n,r){null!=k&&k.current&&("NoiseSynth"!==k.current.name?k.current.triggerAttackRelease(e[0],t,n,r):k.current.triggerAttackRelease(t,n,r))},O=function(e,t){le(c,d,m,e,t,(function(t,n){return x(t,y,e,n)}))};return(0,r.useImperativeHandle)(t,(function(){return{save:function(){h({type:"song/SAVE_TRACK",payload:{songId:i,trackId:c,data:{channel:E.current.get(),steps:oe(c),synth:k.current.get(),effects:w.current}}})}}})),r.createElement("div",{id:c,className:"track"},r.createElement(qe,{trackId:c,channel:null==E?void 0:E.current,onSample:function(){return x(d,y)}}),r.createElement(Re,{trackId:c,numSteps:m,initialValue:f}),r.createElement(je,{trackId:c},Object.entries(null!=p?p:{}).map((function(e,t){var n=(0,_.Z)(e,2),a=n[0],o=n[1];return r.createElement(Ve,{key:t,span:o.span,title:a},o.effects.map((function(e,t){var n=w.current.find((function(t){return t.name===e}));if(!n)return null;switch(e){case"BitCrusher":return r.createElement(Ze,{key:t,trackId:c,node:n});case"Compressor":return r.createElement(Me,{key:t,trackId:c,node:n});case"Distortion":return r.createElement(_e,{key:t,trackId:c,node:n});case"EQ3":return r.createElement(Te,{key:t,trackId:c,node:n});case"FeedbackDelay":return r.createElement(Qe,{key:t,trackId:c,node:n});case"Filter":return r.createElement(We,{key:t,trackId:c,node:n});case"Limiter":return r.createElement(Be,{key:t,trackId:c,node:n});case"PitchShift":return r.createElement(Ke,{key:t,trackId:c,node:n});case"Reverb":return r.createElement(ze,{key:t,trackId:c,node:n});case"StereoWidener":return r.createElement(Ge,{key:t,trackId:c,node:n});default:return null}})))})),r.createElement(Ve,{span:"17 / span 4",title:"envelope"},r.createElement(Le,{trackId:c,node:null==k||null===(a=k.current)||void 0===a?void 0:a.envelope}))))}))),Xe=Je;Je.propTypes={songId:ne().string.isRequired,trackId:ne().string.isRequired,instrument:ne().string.isRequired,stepCount:ne().number.isRequired};var Ye=(0,r.createContext)(),$e=function(e){var t=e.children,n=(0,r.useRef)(new U.KN({mimeType:"video/webm"}));(0,r.useEffect)((function(){U.o6.connect(n.current)}),[]);var a=function(){return(0,U.Sy)().state},o=function(){return(0,U.h4)().state},i=function(){return n.current.state},c=function(){var e=(0,R.Z)(F().mark((function e(){var t,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("running"===a()){e.next=3;break}return e.next=3,(0,U.BL)();case 3:a(),t=document.querySelector("#master"),"stopped"===o()&&"on"!==t.getAttribute("data-recorder")&&(U.J7.start(),null===(r=t.querySelector("button.play"))||void 0===r||r.classList.add("active"),t.setAttribute("data-playback","started"),o(),"stand-by"===t.getAttribute("data-recorder")&&"stopped"===i()&&(n.current.start(),t.setAttribute("data-recorder","on")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e,t,n=document.querySelector("#master");"started"===o()&&(U.J7.stop(),n.setAttribute("data-playback","stopped"),null===(e=n.querySelector("button.play"))||void 0===e||e.classList.remove("active"),o()),"stand-by"===n.getAttribute("data-recorder")&&(n.setAttribute("data-recorder","off"),null===(t=n.querySelector("button.record"))||void 0===t||t.classList.remove("alert"))},s=function(){var e,t,n=document.querySelector("#master");"stopped"===o()&&("off"===n.getAttribute("data-recorder")?(n.setAttribute("data-recorder","stand-by"),null===(e=n.querySelector("button.record"))||void 0===e||e.classList.add("alert")):(n.setAttribute("data-recorder","off"),null===(t=n.querySelector("button.record"))||void 0===t||t.classList.remove("alert"),"started"===i()&&u()))},u=function(){var e=(0,R.Z)(F().mark((function e(){var t,r,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.stop();case 2:t=e.sent,r=URL.createObjectURL(t),(a=document.createElement("a")).download="recording.webm",a.href=r,a.click();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=(0,r.useMemo)((function(){return{getTransportState:o,play:c,stop:l,record:s}}),[]);return r.createElement(Ye.Provider,{value:d},t)},et=function(e){var t=(0,r.useContext)(Ye);if(!t)throw new Error("Master components must be rendered within the MasterProvider component. Error occurred in the ".concat(e," component."));return t},tt=function(e){e.songId;var t,n=e.volume,a=e.bpm,i=(e.onSave,(0,o.I0)(),et("<Master>")),c=i.play,l=i.stop,s=i.record;return r.createElement("section",{id:"master","data-playback":"stopped","data-recorder":"off"},r.createElement("div",{className:"sub"}),r.createElement("div",{className:"main"},r.createElement(Ne,{id:"master-volume",orient:"horizontal",label:"VOL",step:1,max:100,initialValue:null!==(t=se([fe,20],n))&&void 0!==t?t:0,onChange:function(e){return U.o6.set({volume:ae([fe,20],e)})}}),r.createElement(Ie,null,r.createElement(ke,{className:"playback record",variant:"outlined",onClick:s},r.createElement(he,{width:"64%"})),r.createElement(ke,{className:"playback play",variant:"outlined",value:"off",onClick:c},r.createElement(ge,{width:"72%"})),r.createElement(ke,{className:"playback stop",variant:"outlined",value:"on",onClick:l},r.createElement(Ee,{width:"54%"}))),r.createElement(Oe,{id:"master-bpm",orient:"horizontal",label:"BPM",min:60,max:240,initialValue:null!=a?a:120,onChange:function(e){return U.J7.set({bpm:e})}})))},nt={s001:{t001:"i001",t002:"i002",t003:"i003",t004:"i004",t005:"i005",t006:"i006"},s002:{t001:"i001",t002:"i002",t003:"i003",t004:"i004",t005:"i005"},s003:{t001:"i001",t002:"i002",t003:"i003",t004:"i004",t005:"i005"},s004:{t001:"i001",t002:"i002",t003:"i003",t004:"i004",t005:"i005"}},rt=function(){var e,t,n,a,i=et("<Studio>"),c=i.play,l=i.stop,s=i.record,u=(0,o.v9)((function(e){return e})),d=(0,r.useState)("s001"),m=(0,_.Z)(d,2),f=m[0],v=(m[1],(0,r.useMemo)((function(){var e;return null===(e=u.songs)||void 0===e?void 0:e[f]}),[f])),p=nt[f],h=Object.entries(p),y=h.map((function(e){return(0,_.Z)(e,1)[0]})),g=(0,r.useRef)(h.map((function(){return(0,r.createRef)()})));return(0,r.useRef)(new U.Xv({volume:0})),(0,r.useRef)(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"keydown",a=(0,r.useRef)();(0,r.useEffect)((function(){a.current=e}),[e]),(0,r.useEffect)((function(){if(t&&t.addEventListener){var e=function(e){return a.current(e)};return t.addEventListener(n,e),function(){t.removeEventListener(n,e)}}}),[n,t])}((function(e){var t=e.code;switch(t){case"Space":e.preventDefault(),"started"===U.J7.state?l():c();break;case"KeyR":s();break;case"KeyM":U.o6.set({mute:!U.o6.mute});break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":var n=parseInt(t.charAt(t.length-1));if(e.shiftKey){var r=document.querySelectorAll(".t00".concat(n,"-step"));e.altKey?r.forEach((function(e){return e.setAttribute("data-value","off")})):r.forEach((function(e){return e.setAttribute("data-value","on")}))}else if(n<=h.length){var a,o,i=y[n-1];null===(a=document.querySelector("#".concat(i)))||void 0===a||a.scrollIntoView(),null===(o=document.querySelector("#".concat(i,"-sample")))||void 0===o||o.focus()}}})),r.createElement(r.Fragment,null,r.createElement(T,{id:"studio"},r.createElement(tt,{songId:f,volume:null!==(e=null==v||null===(t=v.master)||void 0===t?void 0:t.volume)&&void 0!==e?e:0,bpm:null!==(n=null==v||null===(a=v.master)||void 0===a?void 0:a.bpm)&&void 0!==n?n:120,onSave:function(){g.current.forEach((function(e){e.current.save()}))}}),h.map((function(e,t){var n,a,o,i,c,l,s,u=(0,_.Z)(e,2),d=u[0],m=u[1],p=null==v||null===(n=v.tracks)||void 0===n?void 0:n[d],h=Y[m];return h?r.createElement(Ue,{key:d,ref:g.current[t],songId:f,trackId:d,trackNumber:t+1,notes:h.notes,stepCount:null!==(a=null==p?void 0:p.stepCount)&&void 0!==a?a:16,steps:null!==(o=null==p?void 0:p.steps)&&void 0!==o?o:X,channel:null!==(i=null==p?void 0:p.channel)&&void 0!==i?i:J,instrument:null!==(c=h.instrument)&&void 0!==c?c:"MembraneSynth",synth:null!==(l=null==p?void 0:p.synth)&&void 0!==l?l:h.synth,effects:null!==(s=null==p?void 0:p.effects)&&void 0!==s?s:h.effects,controls:h.controls}):null})),r.createElement(Xe,{songId:f,trackId:"rhythmSynth",instrument:"MembraneSynth",notes:["A3","C4","D4","E4","G4","A4"],stepCount:16,steps:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]})),r.createElement(G,null))},at=(0,q.EN)((function(){return r.createElement("div",{className:"me"},r.createElement(q.rs,null,r.createElement(q.AW,{exact:!0,path:"/",render:function(){return r.createElement(H,null)}}),r.createElement(q.AW,{exact:!0,path:"/studio",render:function(){return r.createElement($e,null,r.createElement(rt,null))}}),r.createElement(q.AW,{render:function(){return r.createElement(H,null)}})))})),ot=(0,q.EN)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.useQuery)(["GET_AUTH"],(0,R.Z)(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().get("http://eoghan.io/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),V({},e))}({enabled:"localhost"!==window.location.hostname});return"localhost"===window.location.hostname||e.isSuccess?r.createElement(at,null):null})),it=s()(),ct=function(){var e=arguments.length>1?arguments[1]:void 0,t=[(0,y.Z)(e)],n=[f.md.apply(void 0,t)],r=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.qC,a=(0,f.MT)((0,v.OJ)(N,O(e)),void 0,r.apply(void 0,n)),o=(0,v.p5)(a);return{store:a,persistor:o}}({},it),lt=ct.store,st=ct.persistor,ut=document.getElementById("root"),dt=new d.S;(0,a.render)(r.createElement(u.QueryClientProvider,{client:dt},r.createElement(o.zt,{store:lt,context:o.ET},r.createElement(i.r,{loading:null,persistor:st},r.createElement(c.xI,{history:it,context:o.ET},r.createElement(m.ErrorBoundary,null,r.createElement(ot,null)))))),ut)}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var i=1/0;for(s=0;s<e.length;s++){n=e[s][0],a=e[s][1],o=e[s][2];for(var c=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(c=!1,o<i&&(i=o));c&&(e.splice(s--,1),t=a())}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,a,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/",function(){var e={179:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,i=n[0],c=n[1],l=n[2],s=0;for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var u=l(r);for(t&&t(n);s<i.length;s++)o=i[s],r.o(e,o)&&e[o]&&e[o][0](),e[i[s]]=0;return r.O(u)},n=self.webpackChunktheseboys=self.webpackChunktheseboys||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[216],(function(){return r(2623)}));a=r.O(a)}();
//# sourceMappingURL=main.11b61e143400a469e9fe.bundle.js.map